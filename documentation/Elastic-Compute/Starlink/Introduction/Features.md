# 产品功能

星链提供了基于Web的控制台和IDE，用户可以完成可视化微服务(VMS)的开发、调试、构建、测试、部署、管理完整流程，具体功能如下介绍。

## 1. 一个简化的微服务编程模型

### 触发器
触发器定义微服务对外提供访问的方式，每个触发器关联一个函数，在一个微服务中可以定义多个触发器，目前支持的触发器有Http、Kafka、Elastic Job。针对Http触发器，系统自动生成URL，可以给前端访问，也可以配置为其他系统中的Webhook URL。Kafka触发器订阅Kafka消息，收到消息后调用关联的函数。Elastic Job是一个定时任务触发器，可以配置Cron表达式和执行参数。 

### 函数
函数封装业务逻辑，由标准的输入/输出以及函数体组成，支持代码函数和BPMN函数。代码函数支持Java、Groovy、JavaScript三种语言。BPMN函数利用BPMN标准可视化地编排业务逻辑。函数都支持配置DB事务。

### 连接器
连接器封装第三方服务，目前支持HTTP和DB两种连接器，用户可以自定义连接器的方法。

### VMS
VMS是指可视化微服务（Visual MicroService），表示一个微服务应用，独立开发和部署，里面包含一个或多个触发器、函数和连接器。之所以称为可视化微服务是因为一方面开发的是一个微服务应用，另一方面是提倡通过可视化的方式来编排微服务逻辑。

### 环境变量
支持在触发器、函数、连接器中使用环境变量，避免硬编码，预置支持四个环境：开发、测试、预发、生产，可以分别配置不同的值，对于密码等敏感变量，还支持在部署态配置为加密环境变量，确保安全性。

## 2. 可视化低代码Cloud Web IDE

### 可视化BPMN函数编排
支持编排各种连接器方法、代码函数、其他BPMN函数，支持分支、异常处理，支持DB事务，自动提示请求参数、环境变量、中间节点的输出结果等上下文信息，支持使用表达式表达复杂的条件分支、输入变量。

### 表达式编辑器
语法高亮、代码提示，方便的示例和帮助文档，丰富的内置函数库，方便构造Map和List组成的复杂对象，支持各种运算。

### 在线开发代码函数
可视化定义函数出入参，支持Java/JavaScript/Groovy，语法高亮，内置API访问日志、各个连接器、环境变量等。
### 在线函数Debug
可以在Web上直接运行函数，查看运行结果，查看日志，诊断问题。自动保存历史执行参数，便于重复执行。
### 可视化触发器配置
各种触发器，通过界面配置触发机制和调用的函数即可，不需要开发。
### 自定义HTTP/DB连接器
可视化配置连接器信息，可自定义多个连接器方法，出入参定义支持三种模式：表格、YAML、CSV，支持根据JSON示例推断参数定义。配置的连接器方法可用于BPMN编排和代码函数。DB连接器方法可参与事务。
### 多Tab页编辑
可以同时编辑多个函数，调试和运行历史都是独立的。
### 实时保存和校验
自动实时保存用户的修改到Cloud工作区，实时校验，并用红标进行提示。

## 3. 自定义业务组件库
### 公共组件库
公共组件由系统维护，但每个用户都可以使用。系统将不断完善公共组件库建设，为用户提供直接可用的组件。
### 团队组件库
团队组件由团队自己维护，对其他团队不可见。用户在VMS内自定义的连接器组件可以导出为团队组件。在BPMN编排中，用户可以浏览、查询团队或公共组件，并直接拖拽到编排面板中。用户可以在星链控制台中维护团队组件，包括组件分组等。
## 4. 支持本地IDE开发
### 源代码完全可见且与Git集成
用户的每个VMS都对应一个Git仓库，所有修改都会先实时保存到Cloud的Git工作区。用户可以提交工作区内容到Git远程仓库。用户可以克隆到本地IDE进行开发，本地提交后，在Cloud Web IDE上也可以看到修改。
### 支持引入第三方包
用户可以在VMS项目中引入第三方包（如Java语言的jar包，JavaScript语言的npm包等），并在代码函数中使用这些包。
## 5. 集成构建发布流程
### 一键在线构建打包
构建时自动打标签，可以实时查看构建日志，可以下载构建完成的包，可以查看构建历史。
### 集成上线审批流程
部署测试和预发环境不需要审批，但部署生产环境的版本需要，支持两级审批，第一级是团队内测试角色的审批，第二级是团队内管理员角色的审批，审批通过的版本方可用于部署生产环境。
## 6. 企业级Serverless 
### 部署环境隔离
区分测试、预发、生产三个不同环境，每个环境分别部署。
### 声明式部署
在部署时，不需要关注服务器细节，只需要说明部署的集群分组、需要部署的实例个数、部署的版本即可，系统自动调度，在部署状态中可以查看是否满足部署期望，部署的细节等。
### 热加载、部署快
复用计算引擎资源，没有冷启动，部署快。
### 跨集群分组统一部署
可以在一次部署中声明多个集群分组，这些分组可以位于不同的机房、可用区。
### 支持灰度发布
修改部署声明，声明多个版本即可，系统自动调度。
### 便捷扩缩容
修改部署声明中的实例个数即可，系统自动加载/卸载。
### 部署态加密环境变量
针对数据库密码等敏感变量，可以在部署配置中再填写，且可以指定加密存储，原文不存储在任何地方，确保安全。
## 7. 私有化Serverless
### 支持部署至私有云和其他公有云
有独立的Serverless部署控制网关和计算引擎模块，可以部署至私有云和其他公有云。部署后，将网关和引擎信息添加至京东云控制台，即可在京东云上进行统一的管理和部署，在部署时选择其他云的集群分组，即可部署至其他云。
### 计算资源管理
用户创建的计算资源，系统提供若干管理功能，包括添加引擎、禁用引擎、启用引擎等，系统会根据可用引擎情况动态调度VMS。
## 8. 稳定高性能的执行引擎
### 稳定可靠
在京东内部应用中已历经618、双11考验。
### 高性能低延时
无状态内存执行，相比业界大多基于数据库或消息系统的编排引擎，延时低，更适合服务编排，广泛应用于面向C端用户的高并发、低延时场景。
### 高性能多语言支持
支持Java、JavaScript、Groovy，各个语言都支持调用各种连接器方法、都提供日志API，更多语言支持在规划中（如Python、Kotlin等）。
## 9. 可观测性
### 部署状态
部署状态一目了然，包括整体状态是否符合预期，部署的集群、分组、引擎详情等。
### 日志
系统为函数主要执行节点自动添加日志。可以在部署状态设置日志级别，可以针对单个引擎独立设置日志级别，以便于诊断。可以查看日志。
## 10. 团队协作与管理
### 团队与成员管理
团队中成员有四种角色：开发、测试、访客和管理员，管理员可以添加/删除成员。用户可以参与多个团队。
### VMS管理
VMS属于一个团队。可以通过克隆已有VMS的方式新建一个VMS。管理员可以将VMS迁移至其他团队。